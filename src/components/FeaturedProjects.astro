---
import { getCollection } from 'astro:content';
import ProjectCard from './ProjectCard.astro';

const featuredProjects = (await getCollection('projects'))
  .filter(project => project.data.featured)
  .sort((a, b) => (a.data.order || 0) - (b.data.order || 0))
  .slice(0, 3);
---

<section id="projects" class="relative py-20 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 overflow-hidden">
  <!-- Modern tech-inspired background -->
  <div class="absolute inset-0 opacity-10">
    <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="tech-grid" width="60" height="60" patternUnits="userSpaceOnUse">
          <path d="M 60 0 L 0 0 0 60" fill="none" stroke="rgba(139,92,246,0.3)" stroke-width="1"/>
          <circle cx="0" cy="0" r="2" fill="rgba(139,92,246,0.5)"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#tech-grid)"/>
    </svg>
  </div>
  
  <!-- Animated accent orbs -->
  <div class="absolute top-20 left-10 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse" style="animation-duration: 5s;"></div>
  <div class="absolute bottom-20 right-10 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse" style="animation-duration: 7s; animation-delay: 1s;"></div>
  
  <div class="container mx-auto px-6 relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="font-heading text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-4">
        Featured Projects
      </h2>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto">
        A showcase of my technical work spanning machine learning, cloud computing, and software engineering
      </p>
    </div>

    <!-- Projects Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
      {featuredProjects.map(project => (
        <ProjectCard
          title={project.data.title}
          category={project.data.category}
          description={project.data.description}
          thumbnail={project.data.thumbnail}
          tags={project.data.tags}
          githubUrl={project.data.githubUrl}
          externalUrl={project.data.externalUrl}
          slug={project.id}
        />
      ))}
    </div>

    <!-- View All Projects CTA -->
    <div class="text-center">
      <a 
        href="/projects" 
        class="group relative inline-flex items-center gap-2 px-10 py-5"
      >
        <!-- Animated gradient background -->
        <div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full shadow-2xl group-hover:shadow-purple-500/50 transition-all"></div>
        <div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full blur opacity-50 group-hover:opacity-75 transition-opacity"></div>
        
        <!-- Content -->
        <span class="relative text-white font-bold text-lg">View All Projects</span>
        <svg class="relative w-5 h-5 text-white group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
        </svg>
      </a>
    </div>
  </div>
</section>
